You are working on the Alpmera web app in Replit. Replit AI will apply changes; do not require manual code edits.

GOAL (single low-credit batch):
- Redesign Admin UI navigation + page structure as placeholders (working routes + consistent list→detail layout).
- Wire ONLY the minimal admin endpoints listed below (read-first).
- Add import dialogs ONLY on:
  1) Refund Plans (CSV import creates DRAFT plan)
  2) Campaign Fulfillment (CSV import creates append-only delivery events)

STRICT RULES:
- Do NOT change database schema, triggers, escrow ledger append-only rules, idempotency logic, auth flow, account module, or public campaign pages.
- Do NOT add heavy libraries. Reuse existing UI components/patterns (table, cards, dialog, master/detail, Timeline).
- Admin endpoints must remain protected by existing x-admin-auth requirement (no bypass).
- Language rules: never use buy/order/checkout/cart/purchase/deal/discount/flash. Use campaign/commitment/escrow/release/refund/fulfillment.
- Keep UI lightweight: mostly tables, filters, simple placeholders, minimal charts (prefer none in this batch).

MINIMAL ADMIN PAGES / ROUTES TO CREATE (placeholders but functional):
1) /admin/control-room
2) /admin/campaigns
3) /admin/campaigns/:campaignId
4) /admin/campaigns/:campaignId/fulfillment
5) /admin/clearing
6) /admin/clearing/ledger
7) /admin/refunds
8) /admin/refund-plans
9) /admin/refund-plans/:planId
10) /admin/deliveries
Optional placeholders (no wiring needed now):
- /admin/suppliers
- /admin/exceptions
- /admin/audit

ADMIN NAV REDESIGN:
- Update Admin sidebar nav to include sections in this order:
  - Control Room
  - Campaigns
  - Clearing
  - Refunds
  - Refund Plans
  - Deliveries
  - (Optional) Suppliers
  - (Optional) Exceptions
  - (Optional) Audit
- Ensure active route highlighting works.
- Keep existing two-pane master/detail style if already implemented; otherwise implement a simple AdminShell with sidebar + main content.

LIST PAGES MUST HAVE (ALL LIST PAGES):
- Search input (q)
- Status filter dropdown when applicable
- Sort dropdown (single)
- Table showing minimal columns
- Loading, empty, error states
- “Export” buttons are NOT required in this batch (defer), except optional simple CSV export links if already easy—do not prioritize.

DETAIL PAGES MUST HAVE:
- Summary header card
- Timeline section using shared Timeline component if already available; if not, create a small internal AdminTimeline wrapper reusing the shared Timeline from account module.
- Avoid large charts.

WIRE ONLY THESE MINIMAL ADMIN ENDPOINTS (create if missing; reuse if exists):
Auth/identity:
- GET /api/admin/me

Control room:
- GET /api/admin/control-room

Campaigns:
- GET /api/admin/campaigns?q=&state=&needsAction=&deliveryStrategy=&sort=&dir=&limit=&cursor=
- GET /api/admin/campaigns/:campaignId
- GET /api/admin/campaigns/:campaignId/timeline

Campaign commitments roster (for fulfillment page; minimal):
- GET /api/admin/campaigns/:campaignId/commitments?q=&status=&limit=&cursor=

Fulfillment console:
- GET /api/admin/campaigns/:campaignId/fulfillment
- POST /api/admin/campaigns/:campaignId/fulfillment/import   (CSV import)

Clearing:
- GET /api/admin/clearing/snapshot
- GET /api/admin/clearing/ledger?type=&actor=&campaignId=&commitmentCode=&refundId=&from=&to=&q=&sort=&dir=&limit=&cursor=

Refunds:
- GET /api/admin/refunds?status=&campaignId=&from=&to=&q=&sort=&dir=&limit=&cursor=

Refund plans:
- GET /api/admin/refund-plans?status=&campaignId=&q=&sort=&dir=&limit=&cursor=
- GET /api/admin/refund-plans/:planId
- GET /api/admin/refund-plans/:planId/rows?q=&limit=&cursor=
- POST /api/admin/refund-plans/import   (CSV import creates DRAFT plan)

Deliveries:
- GET /api/admin/deliveries?status=&deliveryStrategy=&campaignId=&overdue=&q=&sort=&dir=&limit=&cursor=

IMPORTANT: If some endpoints already exist under different paths, DO NOT duplicate. Instead:
- create a small client-side api wrapper that calls the existing paths
- or create thin server aliases that call the existing handlers

UI IMPLEMENTATION SPEC (keep minimal):
A) Control Room (/admin/control-room)
- Render tiles + 2-4 small queues using data from /api/admin/control-room.
- Each queue is a small table (top N rows) with link to the relevant page.

B) Campaigns list (/admin/campaigns)
- Table columns: Name, State, Deadline, Commitment count, Escrow locked total, Velocity (24h or 7d), Last status at, Handshake status.
- Clicking a row navigates to /admin/campaigns/:campaignId.

C) Campaign detail (/admin/campaigns/:campaignId)
- Show campaign summary from GET /api/admin/campaigns/:campaignId
- Show campaign timeline from GET /api/admin/campaigns/:campaignId/timeline using Timeline component
- Include a prominent link/button: “Open fulfillment console” → /admin/campaigns/:campaignId/fulfillment

D) Fulfillment console (/admin/campaigns/:campaignId/fulfillment)
- Show fulfillment summary from GET /api/admin/campaigns/:campaignId/fulfillment:
  - delivery strategy, current milestone, last update, next update due (if exists)
- Show a small roster table from GET /api/admin/campaigns/:campaignId/commitments (commitmentCode, joinedAt, user status, deliveryId if available)
- Add an “Import delivery updates” button that opens a dialog:
  - file upload (CSV)
  - explanation text: “Imports append-only delivery events; idempotent per row.”
  - submit → POST /api/admin/campaigns/:campaignId/fulfillment/import
  - show results: success count, error rows (first N), and a safe message “Some rows failed validation.”
- Do not add execution toggles; import only.

E) Clearing snapshot (/admin/clearing)
- Show cards using /api/admin/clearing/snapshot: In Escrow, Released, Returned
- Link to ledger explorer

F) Ledger explorer (/admin/clearing/ledger)
- Filters: type, date range, q search
- Table: occurredAt, type, amount, currency, actor, reason, campaignId, commitmentCode, refundId
- Uses /api/admin/clearing/ledger

G) Refunds list (/admin/refunds)
- Filters: status, date range, q
- Table: refundId, status, amount, currency, initiatedAt, completedAt, campaignId, commitmentCode

H) Refund plans list (/admin/refund-plans)
- Filters: status, campaignId, q
- Table: planId, status, rowCount, totalAmount, createdAt
- Row click → /admin/refund-plans/:planId
- Add “Import refund plan” button with dialog:
  - file upload CSV
  - explanation text: “Creates a DRAFT refund plan. Does not execute refunds.”
  - submit → POST /api/admin/refund-plans/import
  - on success navigate to the new plan detail

I) Refund plan detail (/admin/refund-plans/:planId)
- Show plan summary + rows table (paginated) from /rows endpoint
- Show validation status counts if available

J) Deliveries list (/admin/deliveries)
- Filters: strategy, status, overdue (boolean), q
- Table: campaignName, strategy, status, lastUpdateAt, nextUpdateDueAt
- Link each row to /admin/campaigns/:campaignId/fulfillment (single place to manage imports)

BACKEND GUIDANCE (if endpoints missing):
- Implement minimal read-only handlers that query existing tables/views.
- For derived fields (locked total, velocity), compute server-side with simple queries; limit scope and performance (cap lists, pagination).
- For import endpoints:
  1) Refund plan import: parse CSV → validate rows → create plan + plan rows in draft tables (or existing equivalents). Must be idempotent by (planId + rowKey) if re-import allowed; simplest: each import creates a new plan.
  2) Fulfillment import: parse CSV → validate milestone enum + identifiers → create append-only delivery events with idempotency per row (batchId + commitmentCode + milestone + date or provided row id).
- Ensure all admin endpoints require x-admin-auth as already implemented.

DELIVERABLES:
- Updated Admin nav + routes + placeholder pages
- Minimal wiring to the endpoints above
- Two import dialogs only (Refund Plans + Campaign Fulfillment)
- A short summary of changed/added files and any endpoint aliases created.
- No large code dumps in the response.
